<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
	<title>道路信息展示</title>
	<link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css"/>
	<link rel="stylesheet" href="http://cache.amap.com/lbs/static/main.css?v=1.0"/>
	<link rel="stylesheet" href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css" type="text/css">
	<script type="text/javascript"
			src="http://webapi.amap.com/maps?v=1.3&key=ce4203c448e716d8434289ffc2c7a6d6"></script>
	<style type="text/css">
		#panel {
			position: absolute;
			background-color: white;
			max-height: 90%;
			overflow-y: auto;
			top: 10px;
			right: 10px;
			width: 280px;
	}
	.custom-input-card{
				width: 18rem;
			}

			.custom-input-card .btn:last-child{
				margin-left: 1rem;
			}

			.content-window-card{
				position: relative;
				width: 23rem;
				padding: 0.75rem 0 0 1.25rem;
				box-shadow: none;
				bottom: 0;
				left: 0;
			}

			.content-window-card p{
				height: 2rem;
			}
	</style>
</head>
<body>
<div id="mapContainer"></div>
<script src="https://a.amap.com/jsapi_demos/static/demo-center/js/demoutils.js"></script>
<script type="text/javascript" src="https://cache.amap.com/lbs/static/addToolbar.js"></script>
<div id="panel">
</div>
<script type="text/javascript">

	var map = new AMap.Map("mapContainer", {
		resizeEnable: true,
		zooms:[14,20], //地图的缩放层次
		center: [106.570911,29.488765], //初始化地图中心点
	});
	AMap.service(["AMap.RoadInfoSearch"], function() {
		var roadSearch = new AMap.RoadInfoSearch({ //构造地点查询类
			pageSize: 5,
			pageIndex: 10,
			city: "500000"
			
		});
		roadSearch.roadInfoSearchByRoadName('九滨路', function(status, result) {
		var a = result.roadInfo[0];
		var len = a.path.length;
		//绘画道路
		for (var i = 0; i < result.roadInfo.length; i++) {
				const element = result.roadInfo[i];
				for (var j = 0; j < element.path.length; j++) {
				        const path = element.path[j];
						const polyline = new AMap.Polyline({
							path: path,  
							borderWeight: 5, // 线条宽度，默认为 1
							strokeColor: 'blue', // 线条颜色
							lineJoin: 'round' // 折线拐点连接处样式
						});
						map.add(polyline)
					}
		}
		
		var start = a.path[0][0];
		var len1= a.path[0].length;
		var fina = a.path[len-1][0];
		//道路信息化窗口
		function openInfo(id,name,type,start) {
				//构建信息窗体中显示的内容
				var info = [];
				info.push("<div class='input-card content-window-card'><div><img style=\"float:left;\" src=\" https://webapi.amap.com/images/autonavi.png \"/></div> ");
				info.push("<div style=\"padding:7px 0px 0px 0px;\"><h4> 道路名称： "+name+" </h4>   ");
				info.push("<div style=\"padding:7px 0px 0px 0px;\"><h4> 道路编号： "+id+" </h4>   ");
				info.push("<div style=\"padding:7px 0px 0px 0px;\"><h4> 道路类型： "+type+" </h4>   ");
				infoWindow = new AMap.InfoWindow({
					content: info.join(""),  //使用默认信息窗体框样式，显示信息内容
					closeWhenClickMap: true,//鼠标点击地图后关闭信息窗体
				});
				infoWindow.open(map,start);
		}
		openInfo(a.id,a.name,a.type,start);
		});

	});
</script>
</html>

